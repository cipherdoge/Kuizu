{"ast":null,"code":"import axios from \"axios\";\nexport default {\n  data() {\n    return {\n      searchQuery: \"\",\n      searchType: \"subjects\",\n      // Default search type\n      searchResults: [],\n      searchPerformed: false\n    };\n  },\n  methods: {\n    async search() {\n      if (!this.searchQuery.trim()) {\n        alert(\"Please enter a search query.\");\n        return;\n      }\n      try {\n        const token = localStorage.getItem(\"accessToken\"); // Replace with your token retrieval logic\n\n        // Debugging: Log the request\n        console.log(\"Sending request with query:\", this.searchQuery);\n        console.log(\"Search type:\", this.searchType);\n        const response = await axios.get(\"/api/admin/search\", {\n          params: {\n            query: this.searchQuery,\n            type: this.searchType\n          },\n          headers: {\n            Authorization: `Bearer ${token}` // Add JWT token to the header\n          }\n        });\n        this.searchResults = response.data;\n        this.searchPerformed = true;\n      } catch (error) {\n        console.error(\"Error during search:\", error);\n        if (error.response?.status === 401) {\n          alert(\"Unauthorized. Please log in.\");\n          // Redirect to login page if needed\n        } else if (error.response?.status === 403) {\n          alert(\"Admin access required.\");\n        } else if (error.response?.status === 422) {\n          alert(\"Invalid search query or parameters.\");\n        } else {\n          alert(\"An error occurred while searching. Please try again.\");\n        }\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","data","searchQuery","searchType","searchResults","searchPerformed","methods","search","trim","alert","token","localStorage","getItem","console","log","response","get","params","query","type","headers","Authorization","error","status"],"sources":["/home/ritvik/quiz_master_v2/Kuizu/frontend/src/components/ManageQuiz.vue"],"sourcesContent":["<template>\n  <div class=\"manage-quiz-container\">\n    <h1>Manage Quizzes</h1>\n\n    <!-- Search Section -->\n    <div class=\"search-section\">\n      <input\n        v-model=\"searchQuery\"\n        placeholder=\"Search users, subjects, or quizzes...\"\n        class=\"search-input\"\n      />\n      <select v-model=\"searchType\" class=\"search-select\">\n        <option value=\"users\">Users</option>\n        <option value=\"subjects\">Subjects</option>\n        <option value=\"quizzes\">Quizzes</option>\n      </select>\n      <button @click=\"search\" type=\"button\" class=\"btn btn-primary\">Search</button>\n    </div>\n\n    <!-- Search Results -->\n    <div v-if=\"searchPerformed\">\n      <h2 v-if=\"searchResults.length\">Search Results</h2>\n      <p v-else>No results found for your query.</p>\n      <div class=\"results-list\">\n        <template v-if=\"searchType === 'users'\">\n          <div\n            v-for=\"result in searchResults\"\n            :key=\"result.id\"\n            class=\"result-item\"\n          >\n            <p><strong>Username:</strong> {{ result.username }}</p>\n            <p><strong>Admin:</strong> {{ result.is_admin ? 'Yes' : 'No' }}</p>\n          </div>\n        </template>\n        <template v-else-if=\"searchType === 'subjects'\">\n          <div\n            v-for=\"result in searchResults\"\n            :key=\"result.id\"\n            class=\"result-item\"\n          >\n            <p><strong>Name:</strong> {{ result.name }}</p>\n            <p><strong>Description:</strong> {{ result.description }}</p>\n          </div>\n        </template>\n        <template v-else-if=\"searchType === 'quizzes'\">\n          <div\n            v-for=\"result in searchResults\"\n            :key=\"result.id\"\n            class=\"result-item\"\n          >\n            <p><strong>Name:</strong> {{ result.name }}</p>\n            <p><strong>Description:</strong> {{ result.description }}</p>\n            <p><strong>Chapter ID:</strong> {{ result.chapter_id }}</p>\n          </div>\n        </template>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  data() {\n    return {\n      searchQuery: \"\",\n      searchType: \"subjects\", // Default search type\n      searchResults: [],\n      searchPerformed: false,\n    };\n  },\n  methods: {\n    async search() {\n      if (!this.searchQuery.trim()) {\n        alert(\"Please enter a search query.\");\n        return;\n      }\n\n      try {\n        const token = localStorage.getItem(\"accessToken\"); // Replace with your token retrieval logic\n\n        // Debugging: Log the request\n        console.log(\"Sending request with query:\", this.searchQuery);\n        console.log(\"Search type:\", this.searchType);\n\n        const response = await axios.get(\"/api/admin/search\", {\n          params: {\n            query: this.searchQuery,\n            type: this.searchType,\n          },\n          headers: {\n            Authorization: `Bearer ${token}`, // Add JWT token to the header\n          },\n        });\n\n        this.searchResults = response.data;\n        this.searchPerformed = true;\n      } catch (error) {\n        console.error(\"Error during search:\", error);\n\n        if (error.response?.status === 401) {\n          alert(\"Unauthorized. Please log in.\");\n          // Redirect to login page if needed\n        } else if (error.response?.status === 403) {\n          alert(\"Admin access required.\");\n        } else if (error.response?.status === 422) {\n          alert(\"Invalid search query or parameters.\");\n        } else {\n          alert(\"An error occurred while searching. Please try again.\");\n        }\n      }\n    },\n  },\n};\n</script>\n\n<style>\n.manage-quiz-container {\n  padding: 20px;\n}\n\n.search-section {\n  margin-bottom: 20px;\n}\n\n.search-input {\n  padding: 5px;\n  margin-right: 10px;\n}\n\n.search-select {\n  margin-right: 10px;\n}\n\n.results-list {\n  margin-top: 20px;\n}\n\n.result-item {\n  border: 1px solid #ddd;\n  padding: 10px;\n  margin-bottom: 10px;\n}\n</style>\n"],"mappings":"AA6DA,OAAOA,KAAI,MAAO,OAAO;AAEzB,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,WAAW,EAAE,EAAE;MACfC,UAAU,EAAE,UAAU;MAAE;MACxBC,aAAa,EAAE,EAAE;MACjBC,eAAe,EAAE;IACnB,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACP,MAAMC,MAAMA,CAAA,EAAG;MACb,IAAI,CAAC,IAAI,CAACL,WAAW,CAACM,IAAI,CAAC,CAAC,EAAE;QAC5BC,KAAK,CAAC,8BAA8B,CAAC;QACrC;MACF;MAEA,IAAI;QACF,MAAMC,KAAI,GAAIC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC,EAAE;;QAEnD;QACAC,OAAO,CAACC,GAAG,CAAC,6BAA6B,EAAE,IAAI,CAACZ,WAAW,CAAC;QAC5DW,OAAO,CAACC,GAAG,CAAC,cAAc,EAAE,IAAI,CAACX,UAAU,CAAC;QAE5C,MAAMY,QAAO,GAAI,MAAMf,KAAK,CAACgB,GAAG,CAAC,mBAAmB,EAAE;UACpDC,MAAM,EAAE;YACNC,KAAK,EAAE,IAAI,CAAChB,WAAW;YACvBiB,IAAI,EAAE,IAAI,CAAChB;UACb,CAAC;UACDiB,OAAO,EAAE;YACPC,aAAa,EAAE,UAAUX,KAAK,EAAE,CAAE;UACpC;QACF,CAAC,CAAC;QAEF,IAAI,CAACN,aAAY,GAAIW,QAAQ,CAACd,IAAI;QAClC,IAAI,CAACI,eAAc,GAAI,IAAI;MAC7B,EAAE,OAAOiB,KAAK,EAAE;QACdT,OAAO,CAACS,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;QAE5C,IAAIA,KAAK,CAACP,QAAQ,EAAEQ,MAAK,KAAM,GAAG,EAAE;UAClCd,KAAK,CAAC,8BAA8B,CAAC;UACrC;QACF,OAAO,IAAIa,KAAK,CAACP,QAAQ,EAAEQ,MAAK,KAAM,GAAG,EAAE;UACzCd,KAAK,CAAC,wBAAwB,CAAC;QACjC,OAAO,IAAIa,KAAK,CAACP,QAAQ,EAAEQ,MAAK,KAAM,GAAG,EAAE;UACzCd,KAAK,CAAC,qCAAqC,CAAC;QAC9C,OAAO;UACLA,KAAK,CAAC,sDAAsD,CAAC;QAC/D;MACF;IACF;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}